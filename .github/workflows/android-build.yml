name: тЬЕ GBSB4U WebBrowser - BULLETPROOF APK Build 
on: 
  push: 
    branches: [ main, master ] # рдЬрдм main рдпрд╛ master branch рдкрд░ push рд╣реЛ 
  pull_request: 
    branches: [ main, master ] # рдЬрдм main рдпрд╛ master branch рдкрд░ pull request рд╣реЛ 
  workflow_dispatch:  # рдореЛрдмрд╛рдЗрд▓ рд╕реЗ рдореИрдиреНрдпреБрдЕрд▓ рд░рди рдХреЗ рд▓рд┐рдП 
 
jobs: 
  build: 
    runs-on: ubuntu-latest # GitHub рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╡рд░реНрдЪреБрдЕрд▓ Linux рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ 
     
    steps: 
    - name: ЁЯУе Checkout GBSB4U-WebBrowser Code 
      uses: actions/checkout@v4 # GitHub рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ рдХреЛрдб рдЪреЗрдХрдЖрдЙрдЯ рдХрд░реЗрдВ 
       
    # тЬЕ FIX 1: Official Gradle Setup - рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ gradlew рдФрд░ Gradle JARs рд╕рд╣реА рд╣реЛрдВред 
    # рдпрд╣ 'gradlew: No such file' error рдХреЛ рднреА рд╣рд▓ рдХрд░рддрд╛ рд╣реИред [community.gradle.org/github-actions/docs/setup-gradle] 
    - name: ЁЯЧДя╕П Setup Gradle (Web Search Verified) 
      uses: gradle/gradle-build-action@v3 # рдСрдлрд┐рд╢рд┐рдпрд▓ Gradle Action рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ 
      with: 
        gradle-version: 8.6 # рд╕реНрдерд┐рд░ Gradle version рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ 
         
    # тЬЕ FIX 2: Java 17 EXPLICIT - рдХреЛрдИ Java version mismatch рдирд╣реАрдВред [superuser.com/questions/1806941] 
    - name: тШХ Java 17 Setup 
      uses: actions/setup-java@v4 # Java 17 рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ 
      with: 
        java-version: '17' 
        distribution: 'temurin' # Java рдХрд╛ рд╡рд┐рддрд░рдг (рдУрдкрдирд╕реЛрд░реНрд╕) 
         
    # тЬЕ FIX 3: Android SDK + Licenses FIRST - рдХреЛрдИ SDK not found/license error рдирд╣реАрдВред [github.com/android-actions/setup-android] 
    - name: ЁЯУ▒ Android SDK Setup 
      uses: android-actions/setup-android@v3 
     
    - name: тЬЕ Accept ALL Licenses (Important!) 
      run: | 
        yes | sdkmanager --licenses # рд╕рднреА SDK рд▓рд╛рдЗрд╕реЗрдВрд╕ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ 
        sdkmanager --update       # SDK рдЯреВрд▓реНрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ 
         
    # тЬЕ FIX 4: Exact SDK Versions - рдХреЛрдИ рдЗрдВрд╕реНрдЯреЙрд▓ failure рдирд╣реАрдВред 
    - name: ЁЯФз Install SDK Components (GBSB4U Compatible) 
      run: | 
        sdkmanager "platforms;android-34" "build-tools;34.0.0" # Android 14 SDK рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ 
        sdkmanager "platforms;android-33" "build-tools;33.0.2" # Android 13 SDK рднреА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ (рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ) 
         
    # тЬЕ FIX 5: Gradle Build - рдЕрдм рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реИ рдХрд┐ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореМрдЬреВрдж рд╣реИрдВред 
    - name: ЁЯЪА Build Debug and Release APKs 
      run: ./gradlew assembleDebug assembleRelease # Debug рдФрд░ Release рджреЛрдиреЛрдВ APKs рдмрдирд╛рдПрдВ 
       
    # тЬЕ APK Upload - рдмрдирд╛рдП рдЧрдП APKs рдХреЛ Artifact рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВред 
    - name: ЁЯУд Upload GBSB4U APKs 
      uses: actions/upload-artifact@v4 
      with: 
        name: GBSB4U-WebBrowser-APKs # Artifact рдХрд╛ рдирд╛рдо 
        path: | 
          app/build/outputs/apk/debug/app-debug.apk   # Debug APK рдХрд╛ рдкрд╛рде 
          app/build/outputs/apk/release/app-release.apk # Release APK рдХрд╛ рдкрд╛рде 
        retention-days: 30 # Artifact рдХрд┐рддрдиреЗ рджрд┐рди рддрдХ GitHub рдкрд░ рд░рд╣реЗрдЧрд╛ 


